# 학습
[베르](https://www.youtube.com/watch?v=fRXNV-rfE2o&list=PLYQHfkihy4Azzx1b7CiP3Wb5pc7w5uyxx&ab_channel=%EB%B2%A0%EB%A5%B4%EC%9D%98%EA%B2%8C%EC%9E%84%EA%B0%9C%EB%B0%9C%EC%9C%A0%ED%8A%9C%EB%B8%8C)
[공식](https://docs.unrealengine.com/5.0/ko/setting-up-character-movement/)

## 설치
epic games다운받고 
UE5다운받으면
에픽게임즈에 UE5라는 탭 생긴다. 아래에 보면 샘플들 있고 다운로드.
비용 : 기본무료. 백만달러 즉 트리플A급 게임되면 5%의 로열티
용량 : 약 17기가

## 크게 달라진점
1. 퀵셀브릿지
epic에서 인수한 Quixel 직접 스캔한 3d, 2d 제공하는 회사. 이 퀵셀 브릿지가 내장되었다. 에픽게임즈 이용자들에게는 무료로 제공
1. 나나이트 지오메트리
폴리곤 최적화 렌더링을 자동으로
와이어프레임으로 보면 폴리곤으로 볼수있음
폴리곤이 너무 많으면 디테일의 나나이트 세팅의 Enable을 체크하고 적용한뒤 움직이면 렉 안걸림
1. 빛
라이트맵 새로 빌드하지 않아도됨. 다이나믹 글로벌 일루미네이션 시스템인 '루멘' 덕분.


1. 풀바디IK 솔버
지형에 따라 발딛는 위치, 손과 발의 위치 어색하지않음
1. 모션워핑
장애물의 크기를 기준으로 만들어진 애니메이션 자동선택

## UI 패널 설명
1. 메뉴바 : 언리얼에 명령과 기능
2. 메인툴바 : 자주사용하는기능들 , 오른쪽끝에 설정(세팅)
3. 뷰포트 : 게임속세상인 레벨을 바라보고 돌아다니고 액터 배치. 모드를통해 세상을 보는 시각을 바꿀수있음
4. 콘텐츠 드로어 : 프로젝트 내에 포함된 에셋 관리
5. 아웃라이너 : 현재레벨에 배치되어있는 모든 콘텐츠를 계층적으로 봄. 원하는 엑터를 빠르게 찾기위해 사용.
6. 디테일 : 엑터의 속성


## 뷰포트
#### 원근뷰
    <마우스로>
    좌클릭한채 드래그 : 카메라 좌우로 회전
    좌클릭한채 위아래 : 카메라 앞뒤로 이동
    우클릭한채 이동 : 고정된 위치에서 회전만
    좌우클릭 동시에 한채로 이동 : 카메라 이동

    <키보드로>
    우클릭누른채로 WASD와
    그냥 WASD
    QE : 위 아래
    CZ : 줌인 줌아웃

    <빠른이동>
    맵이 너무 클경우 액터를 아웃라이너 패널에서 선택후 더블클릭 또는 F키(포커싱)

    <기타>
    ALT + 좌클릭드래그 : 포커싱한 액터를 중심으로 회전
    ALT + 우클릭드래그 : 포커싱한 액터를 중심으로 뷰포트 카메라 앞뒤이동

#### 직교뷰
    와이어프레임 설계도같이 볼수있다.
    거리의 왜곡없이 실제 길이에 맞게 보인다.
    우클릭 드래그 : 카메라 이동
    좌클릭 + 우클릭 드래그 : 줌인/줌아웃
    휠 드래그 : 길이(거리) 측정

## 엑터
- 선택 : 클릭
- CTRL 선택 : 다중선택, 이미선택된것에서 제외
- 트랜스폼 조작 : 기즈모의 모양을 보고 알수있다. 
  - 화살표는 그축으로, 면으로 당기면 그 평면으로
  - 스냅단위를 바꿔주면 단위크기가 바뀐다. 기본은 10
  - 이동 W
  - 회전 E
  - 크기조절 R
- 엑터선택후 ctrl b : 해당엑터의 블루프린트

### 표시조작
- 뷰포트에 보이는 아이콘들은 월드에 배치되었지만 게임중인 플레이어의 눈에는 보이지 않는 환경적인 요소(원, 빛, 소리 등)
- 게임모드 : G
    #### Static Mesh
    비디오 메모리에 캐시되고 그래픽 카드에서 렌더링 할 수 있는 폴리곤 세트로 구성되는 지오메트리 조각
    지오메트리에 쓰이는 기본단위.
- 실시간 재생 : CTRL R
- 몰입모드 : F11

### 공부
영어 검색이 훨씬 자료가 많고 공식 문서도 영어.
엔진이나 툴 설정을 영어로 하는것을 추천
메뉴바 - 편집 - 에디터 개인 설정 - 지역&언어 - 영어로 변경


---
### 큐브그리드와 프로토타입
창 - 환경라이트믹서 - 버튼들을 순서대로 눌러주면 기본세팅
//단, Create Atmosphere Light ( 대기빛생성)은 0번만 선택하고 1번 안함. 아주 특별한 경우만 대기빛 여러개
그러면 비어있는 레벨이 자연스러운 하늘로 바뀜
ctrl + L 누르고 마우스를 움직이면 아주 빠르고 쉽게 레벨의 메인 빛의 방향을 변경할 수 있다.

큐브나 실린더같은 액터 배치보다 훨씬 좋은방법이 큐브그리드 기능
메인툴바 - 모드를 모델링 모드로 변경 - 모드패널의 PolyModel섹션에서 CubeGr 선택 - 레벨에 그래드가 보임
원하는 영역을 선택하고
E 누르면 선택한 영역에 큐브가 한칸 쌓임.
Q 누르면 선택한 영역이 깎임.
CTRL 드래그로 빠르게 쌓거나 깎을 수 있음

CTRL + E : 그리드 한칸을 크게 만듦
CTRL + Q : 그리드 한칸을 작게 만듦

CubeGr의 Corner Mode선택 - 요소의 모서리 선택 - 큐브를 올리거나 내리면 경사로가 만들어짐

원하는 큐브그리드를 만들었으면 가운데 있는 Complete버튼 클릭하면 형태가 확정되면서 빛의 영향을 받게됨

<형태완성후>
콘텐츠브라우저 우클릭 - 퀵셀콘텐츠추가(Add Quixel Content) - 브릿지패널 열고 - 여러가지 텍스처와 모델 가져옴 - 레벨 꾸미기

<엑터 배치>
레벨에 플레이어 스타트 액터 배치

--- 
프로그래밍
[C++클래스 생성과 기본 이벤트](https://www.youtube.com/watch?v=DkJqLIpSvik&list=PLYQHfkihy4Azzx1b7CiP3Wb5pc7w5uyxx&index=8)
프로젝트 타입 C++선택해야함.
뭔가 에러가 뜬다면 밑에 링크있는것들 들어가서 설치하면된다.
- 클래스 생성방법
  1. 메뉴바 - 툴 - 새로운c++클래스 생성
  2. 콘텐츠브라우저 - C++클래스폴더 - 추가버튼
  부모클래스 선택. Actor(레벨에 배치할수있는 오브젝트)선택해보자.
  cmd창 뜨고 초록색으로 Successfully linked patch   하고 ---- Finished ---- 뜬다.
  컨텐츠 브라우저의 소스패털 열고 - C++Classes폴더 보면 헤더파일과 소스파일 2개가 생긴걸 볼수있다.
  헤더파일 열면 소스파일을 열면 3개가 이미 생성되어있다.
      - 생성자 : 기본값 세팅
      - BeginPlay함수 : 리스퐅될때 한번 호출
      - Tick함수 : 프레임마다 호출
- 로그 남기기
    UE_LOG(카테고리명, 포맷, 값)
    예) UE_LOG(LogTemp, Log, TEXT("Constructor"));
- UE5에서는 컴파일 버튼이 사라졌다. 대신 라이브코딩
콘솔명령어에서 LiveCoding.Compile 명령어 또는 **Ctrl + Alt + F11**
- 로그보기
하당툴바의 출력로그 버튼 - 로그패널 레이아웃에 고정 - 위에서 만든 MyActor를 씬에 배치하고 플레이 

[변수, UPROPERTY](https://www.youtube.com/watch?v=VyYqyVe3vQI&list=PLYQHfkihy4Azzx1b7CiP3Wb5pc7w5uyxx&index=9)
- 변수타입 : 정수, 소수, 문자열, 논리변수
    정수 : int8, int16, int32, int64, uint8, uint16, uint32, uint64, 
    소수 : float, double
    문자열 : std::string,
            FString = TEXT()매크로 사용해야함
            TCHAR
    논리 : bool
- 변수선언 : 클래스의 헤더파일의 public: 안에 선언
- 접근제한자 : public, protected, private
- UPROPERTY : 언리얼 엔진 에디터에서도 보이고 사용할 수 있도록 하기 위한 매크로. 변수마다 붙여줘야한다.
    매개변수에 EditAnywhere, BlueprintReadWrite, Category="Damage"
  - EditAnywhere : 아키타입(archytype) 과 레벨에 배치된 인스턴스 양쪽 모두의 프로퍼티 창에서 편집할 수 있음
    - archytype : 아직 인스턴스화 되지 않은 블루프린트 원본
  - BlueprintReadWrite : 블루프린트에서 읽기와 쓰기 모두 가능
  - Category="Damage" : 블루프린트나 언리얼에의 이 변수 표시를 저이름의 카테고리로 묶어서 보여줌
  - VisibleAnywhere : 보이지만 편집 안됨
  - Transient : 휘발성으로 저장되지 않음
  

- 컴파일 후 레벨에 배치
- 선택후 디테일패널에서 프로퍼티들 보이는거 확인

- 프로퍼티의 기본값 설정. 생성자 함수에서. 
  - 1번방법  :  .cpp파일의 생성자 옆에 콜론입력후 프로피터이름(값), 프로퍼티이름(값)
  - 2번방법 : 생서자의 바디에서 기본값 대입
  신기하게 커멜케이스로 변환되어 띄워쓰기 해줘서 보여주네
  다시 컴파일하면 초기화값으로 온걸 확인할수있다는데 안바뀜

---
### paraer 2d 
페이지 하나씩 넘기면서 조금씩 달라지는 그림이 움직이는것처럼 보이게 하는 현태의 수동 애니메이션
그렇게 만들어진 움직임 하나를 Flipbook이라 한다.
키프레임으로 구성되며.   키프레임은 스프라이트와 이를 표시할 기간이 포함된다.


---
[언리얼5 공식문서](https://docs.unrealengine.com/5.0/en-US/animation-blueprints-in-unreal-engine/)
[2d 애니메이션과 움직인 구현](https://www.youtube.com/watch?v=r41W7O22zgo&list=RDCMUCwdKySs6j48yl1ae8csAurQ&start_radio=1&rv=r41W7O22zgo&t=585&ab_channel=Chris%27Tutorials)
[아이언맨](https://www.youtube.com/watch?v=ZTsDv2jdTsg&t=223s&ab_channel=Uisco)
1. 에셋 가져오기
2. paper2d로 변경
   다중클릭하고 우클릭 - Sprite Actions - Apply Paper2D Texture Settings(페이퍼2d 텍스쳐세팅적용)    그럼 배경이 투명하게 바뀜
3. Sprite로 만들기(Sprite 추출)
  idle그림 선택 - 우클릭 - Sprite Actions - 스프라이트 추출
  그리드로 바꾸고 너비 44픽셀, 높이30  Naming은 Sprite_{0}
4. 플립북으로 변경
  우클릭해서 플립북 만들고 방금만든 스프라이트 드래그앤 드랍
5. 캐릭터 추가
   - 애니메이션 변경 : 모든클래스 - 페이퍼캐릭터 - 비어있는 캡슐이 레벨에 추가된다. - Details패널의 스프라이트 - Source Flipbook을 바꿔주면된다. 
     그걸 90도 각도에서 보면 이제 보인다.
6. 블루프린트
  Slime_Blueprint
  위치, 방향, 크기등 지정 (Shape. 셰이프)
  컴파일 후 종료
7. 재배치
아까 넣어뒀던건 공중에 떠있는거 같으므로 삭제후 블루프린트를 드래그앤드랍으로 레벨에 배치하면 캡슐 충돌이 적용되어 땅에 리스폰된다.
시작 카메라 위치 재배치

8. 3번부터 반복해서 맞았을때 에니메이션 추가
9. 블루프린트 변경
오른쪽 아웃라이너에 안보여서 컨텐츠 브라우저에 있는 블루프린트 사용함
이벤트그래프에서 왼쪽 Sprite캡슐 드래그앤 드랍으로 가져옴
파란동그라미 당겨서 Set Flipbook
  디테일에서 
  변수이름 HitFlipbook
  변수타입 : Paper Flipbook
  Default Value = Slime_Hit선택
  컴파일
10. 변수 HitFlipbook 드래그앤드랍
Get선택
Set Flipbook의 New Flipbook으로 이어주기
Event BeginPlay노드를 SEt Flipbook과 이어주기
컴파일후 실행


[다른강의-영어](https://www.youtube.com/watch?v=g31NTpq9p-o&ab_channel=CobraCode)
서니랜드 에셋 : https://ansimuz.itch.io/sunny-land-pixel-game-art/download/eyJpZCI6MTQ3NzQ3LCJleHBpcmVzIjoxNjU4NjUxMTYwfQ%3d%3d.%2fOCRb%2bLjnMb%2fsLsGuReLCTX%2b2FE%3d


### 맵
타일셋 만들고 타일맵 생성

### 주인공에 카메라 고정
SpringArm 추가하라는데 없음


### [udamy 2만5천원짜리](https://www.udemy.com/course/learn-how-to-make-a-2d-platformer-in-unreal-engine/learn/lecture/30917874#learning-tools)
- 한글 영어로 바꾸기
Edit - Editor Preference - 지역 & 언어

1강. 프로젝트 생성
블루프린트로 시작용컨텐츠없이 platformer2dproject
창 - layout - classic ue4로 변경



2강. 자료 다운로드 
리소스 다운로드

3강. 키세팅 Settins Up Input Player Input
Content에 폴더 생성 (이름 : 2DPlatformerBlueprints)
  콘텐츠뷰에서 그폴더 들어가서 - 우클릭 블루프린트 클래스 - 부모에 paper검색해서 paper character선택 - 이름은 2dCharacter  //pawn모양 아이콘으로 파일 생김

상단 Edit창 - project edit - 엔진 - 입력 - Bindings -
  Actions Mappings에   Jump 라는 이름으로 키보드 SpaceBar, Up
  Axis Mappings에 Moveright라는 이름으로 Right   1.0 , Left -1.0 

3. 리소스 가져오기
Sprites폴더 생성 안에 PlayerCharacterSprites폴더생성
다운받아놨던 2D Platformer Course Assets 폴더의 HeroSprites 내부폴더 전부다 복붙

4. paper2d로 변경
idle폴더 들어가서 전체선택하고 우클릭 스프라이트액션 - 페이퍼2d텍스쳐적용    이렇게 하니 확대해도 안깨지네. 배경투명하게되고
5. Sprite 생성
idle폴더 들어가서 전체선택하고 우클릭 스프라이트액션 - 스프라이트생성
6. 플립북 생성
생성된 스프라이트 선택후 우클릭 - 플립북 생성.    만들어진 플립북의 애니메이션 확인. 속도 5로 변경
idle 끝났다.  run, jump, Fall에 대해서 4번부터 반복
점프롸 런 속도는 15, 


---
4강. 블루프린트
아까만든 2dCharacter 블루프린트 더블클릭. 풀블루프린트로 열기
- 뷰포트에 캡슐 컴포넌트 확인.
  그 하위의 Sprite 선택하고 오른쪽 Source Flipbook을 idle에니메이션으로 바꿔주기
    location 20, 0, 20
    Scale 5, 5, 5
    로 변경하면 적당하게 찬다.
  다시 Capsule가서 오른쪽 Shape에서 캡슐의 모양을 바꿔줄수있다. 83, 36으로 변경
- 이벤트 그래프
  - 우클릭  - jump검색 - 인풋의 액션이벤트로 있는 jump 선택 - Pressed를 캐릭터의 jump와 연결
                                                         - Relased를 캐릭터의 Stop Jumping과 연결
  - 우클릭 - move right 검색 - Axix Events에 있는거 선택  - Add Movement Input과 연결
    //**Add Movement Input노드**는 Pawn을 받은 방향으로 값만큼 이동시키는 노드다.
    Axis Value값(초록)은 Scale Value값(초록)과 연결
    월드에서 변경해야될 World Direction X 1로 변경
  - 왼쪽이동은 강의에 없는데 똑같이 해주면됨
- 카메라 고정
  - 다시 뷰포트로 가서 캡슐컴포넌트에 camera카테고리에 있는 SpringArm추가. rotate변경해서 정면을 바라보도록
  - SpringArm하위에 Camera추가 - 방향 캐릭터를 보도록 변경,
                  - 오른쪽 Camera Settings - Projection Mode(투명모드)를 Orthographic으로. 
                                            Ortho Width 1000으로 변경
    컴파일

- 벽 생성
콘텐츠 브라우저로 가서 Content/Sprites하위에 Objects폴더 생성 - GreySquare 폴더 생성
다운받은 폴더의 Objects폴더의 greysquare 가져오기 - 우클릭 create sprite
- 2dCharacter 레벨에 배치
카메라가 캐릭터에 고정안돼있음.  무빙치면 카메라가 무빙됨.
  : 캐릭터 선택후 디테일에서 pawn검색. Auto Possess Player(플레이어 자동방의) Disabled 돼있떤거 Player 0으로 변경
  //Player0은 온라인이 아닌 로컬플레이어를 의미하는데 Player0폰으로 빙의되므로서 자동으로 Player0폰을 컨트롤하는 입력이 활성화된다.
- greysquare스프라이트 화면에 배치
캐릭터의 y축 0으로 바꾸고 바닥에 배치하고 길게 늘린다음 게임 플레이
---
위까지 이제 idel형태로 점프, 좌우무브, 땅에 딛기 까지 됨
---
강의5. Settings Up The Player Character Pt2
- 캐릭터 회전
[플레이어 이동, 회전 블로그](https://ansohxxn.github.io/ue4%20lesson%201/ch3-2/)
캐릭터 블루프린트 - 디테일의 트랜스폼 - 회전 클릭해서 상대회전을 월드(절대) 회전으로 변경
Envet Graph의 Event Tick에 연결할거다. 
먼저 왼쪽컴포넌트에있는 캐릭터무브번트 가져오기 - get velocity검색해서 연결(Velocity카테고리) - 우클릭 구조체 핀 분할 하면 x,y,z축 속도 나온다.
Event Tick 화살표 끌어서 Print String 연결한다음 Velocity X랑 연결시켜서 화면에서 찍어보기.  +600, -600 나온다.
   확인했으면 지우고 Velocity X를 Compare Float와 연결.  Input은 속도 x와 연결
3분까지 따라했는데 잘안됨!!!!!
왼쪽버튼을 눌렀을때 강의는 오른쪽을 보면서 왼쪽으로 움직이는데  나는 왼쪽을 보면서 오른쪽으로 움직인다.
- 카메라 액터 클릭하고 Pawn에서 Use Controller Rotaion Yaw 체크해제하면 오른쪽만 보면서 왼쪽 이동됨

**회전**
- Use Pawn Control Rotation : 컨트롤러의 회전값을 사용.  
  - Pitch : 횡축을 중심으로 회전. 비행기로치면 상승하강
  - Yaw : 수직축을 중심으로 회전. 잔나 공중에뜸. 비행기로 치면 바라보는방향이 바뀜.
  - Roll : 종축을 중심으로 회전. 머리와 꼬리 선을 중심으로 회전. 레넥톤. 비행기로 치면 회전회오리


//체크해제하면 캐릭터의 방향과 이동방향을 독립적으로 제어됨.  
4분까지 print로 찍기
  branch빼고
  greater빼고
  Ismovingright?변수 생성.  드래그앤드랍. set으로 설정