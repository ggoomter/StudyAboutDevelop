주제와 구성, 흐름은 좋은데 깊이가 좀 깊다.


---

- 서버의 하드웨어는 장비 특성에 따라 3가지로 나뉜다.
	- 메인프레임
		- IBM사의 제품. 점점 유닉스나 x86서버에 자리를 내주다 최근에는 현장에서 접하기 어려운 장비
		- 1티어구조(호스트-터미널) : 단순하고 효율적이지만 컴퓨팅 처리 비용이 높다.
		- 2티어구조(클라이언트-서버) : UI, 프로그램 처리는 클라이언트에서, 배치나 실시간 처리는 서버에서.   개발이 쉽고 서버부하를 경감시킬수 있음
		- 3티어구조(클라이언트-웹서버-데이터베이스서버) : 확장성이 좋고, 관리가 쉬우며, 프로그램 재사용이 가능
		- 창고를 여러개 만드는 것이 아니라 창고를 크게 만드는 개념
		- 장점 
			- 높은 안전성 : 서드파티 솔루션까지 IBM이 검증
			- 높은 안정성 : 성능이 과도하게 느려지거나 비정상 종료되든가 하지 않음
			- 높은 보안성 : 폐쇄적, 운영체제의 구조를 알아야 취약점 분석이 가능
		- CICS(Customer Information Control System)
			- 메인프레임을 했던 사람들은 참 많이도 들었던 추억의 솔루션. 톰캣같은 역할
			- 초기 메인프레임이 가장 많이 사용된 금융권. 특히 은행. 그때 업계에서 많이 사용했던 용어가 CIS(Customer Information System)
	- 유닉스
		- 메인프레임에 비해서 물리적인 크기가 작고 접근성도 쉬운 새로운 시스템
		- 1980년대부터 유닉스 서버라는 이름으로 몇몇 서버 제조업체에서 개발하였으며 3강구도. IBM, HP,  선마이크로시스템즈
	- x86
		- 컴퓨터가 PC로 가정에 보급되기 시작할때 삼보, 삼성, 현대 등 많은 기업에서 컴퓨터를 생산했고 그때 사용된 CPU가 인텔의 80286
		- 이후 인텔은 자사의 신규 CPU를 기존의 제품과 구분하기 위해 386, 486, 586 과 같이 명명하여 불렀더. 특히 팬티엄이라 불린 586은 전세계적으로 히트
		- 인텔은 CPU를 32비트와 64비트로 나누는 전략으로 저성능은 32비트로 팔았다.
		- 하지만 인터넷 활성화, 정보화 시대의 도래로 수많은 소프트웨어들은 쏟아져 나왔고 인텔은 이에 적절히 대응 못할때 AMD가 32비트와 64비트를 동시에 처리할 수 있는 기술을 2003년에 개발.
		- AMD의 시장점유율이 급성장하고 마음이 급해진 인텔은 AMD로 부터 특허를 사서 2005년에야 64비트 처리 기술을 개발
- 위의 그 비트(bit)는 뭔가요?
	- CPU의 구성요소는 산술논리장치(ALU : Arithmatic Logic Unit), 제어장치(Control Unit), 레지스터 기억장치(Memory Unit)
	- 레지스터를 통해 CPU는 메모리와 정보를 주고받는데 경로가 넓으면 넓을수록 한번에 처리할 수 있는 데이터의 양이 많아져서 처리 성능이 높아진다.
	- 컴퓨터가 제 성능을 발휘하기 위해서는 CPU, 운영체제, 애플리케이션이 같은 비트로 구성되어야 한다.
	- 예를들어 윈도우 32비트 버전을 설치하면 내컴퓨터의 램이 4GB가 넘어도 사용못한다. 2의 32승인 4GB만큼의 메모리만 할당할 수 있기 때문(2의 30승이 약 1GB)
-  메모리(RAM)
	- 모든 CPU에는 1개이상의 메모리가 장착되어야 한다. 예를들어 CPU는 2개로 구성하고 메모리는 8GB하나만 구성할 수 없다. 4GB 2개를 설치해줘야 한다.
- 현재 디스크는 3가지 종류
	- SSD, SAS(SCSI방식), SATA(ATA방식)
	- SSD가 성능이 제일 좋고 제일 고가, SATA는 반대, SAS는 중간
	- 속도는 서버용은 1만~1만5000rpm인데 PC용은 5400~7200rpm
- 동시성을 갖추기 위해 ACID를 갖춰야한다.
	-  원자성(Atomicity)
	-  일관성(Consistency)
	- 고립성(Isolation)
	- 지속성(Durability)
- SAM파일
	- Sequential Access Method
	- 메인프레임에서 유래된 용어. flat한 평문 형태의 데이터를 사용하는 방식
	- 쉽게말해 데이터가 EBCDIC(Extended Binary Coded Decimal Interchange Code)로 작성된 파일
	- 혹은 DB에서 사용되는 파일이 아닌 것
- 스토리지
	- 엔트리급, 미들레인지급(99.999%, 하이엔드급(99.9999%)
	- 가용성 지표인 식스9 가용성이 99.9999%라는 말은 1년에 32초의 다운타임   / 파이브9은 1년에 5분15초의 다운타임을 허용하는 수치
	- 연결방식에 대한 표현 
		- DAS :  Direnct Attached Storage. 서버에 직접 연결
		- SAN : Storage Area Network : SAN 스위치를 통해 서버와 스토리지를 연결하여 성능이나 확장성을 보장하는 연결방식
		- NAS : Network Attached Storage. 이더넷 네트워크를 통해서 서버와 스토리지가 각각 연결되어 통신
	- 스토리지 도입시 고려사항
		- 성능, 확장성, 호환성, 가용성, 활용성
		- 필요한 기능의 유무에 따라 같은 모델이라도 가격차이가 엄청나게 되니까 제조사의 프리세일즈 담당자로부터 사전에 설명을 여러차례 듣고 조언을 구하는게 좋다.
		- 3TB 1개보다 300GB 10개 디스크가 성능이 좋다.
	- 스토리지를 스토리지 답게 만드는 RAID기술
		- 스트라이핑(striping) : 여러개의 디스크로 분산 저장.  읽기 성능이 우수. 디스크 하나만 망가져도 데이터 인식 할 수 없음
		- 미러링(mirroring) : 같은 데이터를 2개의 디스크로 복제하여 저장
		- 핫스페어(hot spare) : 고장난 디스크는 리빌딩이라는 내부 연산을 통해 다른 디스크로부터 기초 데이터를 제공받아 원래의 상태로 복구하고 핫스페어아 RAID그룹에 들어가게 되어 활성화. 자동차의 스페어타이어같이
	- 백업
		- 풀카피(full copy) :  원본과 동일한 용량을 복제
		- 스냅샷(snapshot) : 원본데이터를 가리키는 포인터와 변경이력만 관리하는 복제. 성능이 떨어지고 용량의 이점
	- 씬 프로비저닝(thin provisioning)
		- 반대는 thick provisioning. 고정할당
		- 스토리지의 효율적인 사용을 위해 사용자를 속이는 기법. 즉, 10명이 100GB를 요청했다면 실제로는 껍데기만 가상의 스토리지로 100GB를 만들어주고 정말로 데이터가 필요할때마다 조금씩 할당
- CPU는 나노세컨드 단위, 메모리는 마이크로세컨드 단위, 디스크는 보통 밀리세컨드 단위로 동작. 1000배씩차이
- 네트워크
	- 네트워크의 기본은 '식별'
	- 프로토콜
		- 프로토콜의 특성을 이해하려면 헤더의 구조를 보는것이 가장 확실하다.
		- 국제인터넷표준화기구(IETF : Internet Engineering Task Force), 전기전자기술자협회(IEEE : Institute of Electrical and Electronics Engineers)에서 국제 표준을 정하고 관리
		- ADSL(Asymmetric Digital Subscriber Line) : 기존의 전화선을 그대로 사용
	- OSI 7계층의 의미
		- 외국인과 대화를 할 때 서로 이해하는 언어를 써야 대화가 가능하듯이, 상호이질적인 네트워크 간의 호환성을 위해서 제정한 개방형 통신모델이 바로 OSI(Open System Interconnectgion) 7계층
		- 계층이라고 부르는 이유는 상호 연관성을 가지고 동작하기 때문.  서로 다른 운영체제, 브라우저, 회선 환경에서도 통신이 이루어져야 하기 때문에 상위에서 하위계층으로 이동하면서 '헤더'라고 부르는 구분자를 계속 덧붙이게 된다.
		- 각각의 헤더에서는 해당 계층에서만 사용되는 정보(L2 : MAC주소, L3 : IP주소, L4 : 포트번호).  수신자는 하위 계층부터 차례로 자기 계층에 해당하는 헤더의 정보를 읽어 상위 계층으로 데이터를 전달하게 된다.
		- 그러면 전송하는 데이터양에 비해서 헤더가 너무 커서 배보다 배꼽이 크지 않나요?
			- 그정도로 오버헤드가 많지는 않ㄴ다. 네트워크에서 MTU(Maximum Transmission Unit)라고 부르는 최대 전송단위가 보통 1500byte인데 L3, L4 헤더를 합치면 각각 20bytes씩
	- TCP / IP
		- IP(Internet Protocol)
		- 총 20bytes의 크기. 각각 32비트 크기의 출발 IP주소와 도착 IP주소를 가지고 있다.
		- IP주소를 32비트라고 부르는 이유
			- 201.100.101.102 처럼 보이지만 이것을 이진수로 표현하면 11001001. 01100100. 01100101. 01100110  이 된다. 각각 8비트로 이루어진 4개이므로
			- 쉽게말해서 4개칸에는 각각  0부터 255까지의 숫자(8비트)가 들어가므로
		- TCP(Transport Control Protocol)
			- 16비트 주소여서 65,536개의 주소를 가짐
		- 왜 TCP와 IP는 하나로 묶여서 표준이 된 걸까?
			- TCP와 IP가 가진 고유의 특성이 인터넷에 적합하기 때문. 
			- IP는 Connectionless Protocol의 특성을 가진다.    Connectionless의 의미는 상대방의 연결 여부에 상관없이 데이터를 보내고 받는다는 뜻
			- 이런 특성을 가지는 대표적인 프로토콜이 IP와 UDP인데 수많은 사용자와 대량의 정보를 주고받아야 하는데 그때마다 서로간의 상태를 확인하고 전송하면 부하가 너무 높아지는 문제가 생기기 때문에 그 역할을 TCP가 하게 된다.
			- 즉, TCP는 Connectionless한 IP의 위에서 Connection-Oriented한 연결을 구현 하기 위한 목적으로 만들어졌다.
			- TCP는 데이터가 정상적으로 전달되지 않으면 다시 전달해 줄 수 있는 기능 (ACK, Retransmission)을 가지고 있고, 통신상태가 좋지않아 데이터의 순서가 뒤바뀌어져 전달되면 이를 바로 잡아주는 기능 (SEQ, Recording)도 가지고 있다. 전송중 연결이 중단되었는지 확인하는 기능, 송수신 측의 버퍼 사이즈나 현재 상태를 확인하여 미처 처리하지 못한 데이터가 있으면 전송 속도를 조절해 주는 기능도 가지고 있다.
	- 각 계층을 대표하는 네트워크 장비
		- 계층이라는 단어보는 레이어라는 용어를 사용하고 L로 줄여서 사용한다.
		- L1 : 리피터(repeater)
			- 최하단에서 전기신호를 통해 데이터를 전달한다. 당연하게도 장거리 전송시 간섭, 발열 등의 이유로 신호가 감쇄하고 잡음 발생
			- 이때 전기적으로 신호를 증폭시켜 주지 않으면 데이터가 정확하게 전달되지 못한다. 그러나 물리적으로 신호를 증폭하다 보니 잡음도 함께 증폭되기에 무한정 증폭하면서 전달할 수 없다. 4홉 이상의 거리는 신뢰성있는 연장이 불가능
			- 예를들어 가정집에서 많이 사용하는 1000base-T(Cat5/5e/6/7) 케이블은 100m가 제한거리인데 리피터를 사용하면 400m까지는 연장할 수 있다.
			- 태평양 해저광케이블은 9,000km가 넘는 거리를 안전하게 통신하기 위해 어른 허리두께의 광케이블과 대포알 모양의 광신호 증폭기(리피터)를 촘촘히 깔아두게 된다.
			- 무선통신 역시 공기중에서 신호반사와 산란때문에 기지국을 거칠때마다 리피터의 기능을 수행해준다.
		- L2 : 스위치
			- 서버와 직접 연결되는 장비라서 데이터센터에서 흔히 볼 수 있다.
			- 송신자의 헤더에 포함된 목적지의 MAC주소를 확인하고, 자신이 가지고 있는 MAC주소 테이블을 참조하여 데이터 전달
			- 허브와는 달리 포트별로 다른 속도를 제공할 수 있고 각각의 포트는 고유의 MAC를 가지고 있다.
			- 서버와 직접 연결되는 스위치이기 때문에 엑세스 스위치 혹은 스위칭 허브라고 부르기도 함
			- 루프방지
				- 네트워크내에 2개이상의 스위치가 존재하는 경우 브로드캐스트 패킷이 종료되지 않고 계속 재전파되면서 대역폭을 소진하게 되는 현상
				- 보통 서버 구성시 스위치 장비의 장애를 대비하여 스위치를 이중으로 구성하기 때문
				- MAC주소 확인을 위해 ICMP(Internet Control Message Protocol) 브로드캐스트가 발생하는데 L2헤더에는 IP헤더와는 달리 TTL(Time to Live)이 없다.
				- IP인 경우라면 TTL만큼 전파되다가 TTL이 0이되면 해당 패킷은 버려진다.
				- 이를 해결하기 위한 가장 전통적인 방식은 STP(Spanning Tree Protocol)를 이용하는 것. 스위칭중 하나를 끝점으로 지정해서 브로드캐스트가 도착하면 강제로 제거. 그런데 이렇게하면 한쪽만 통신이 가능한 Active-Standby구조가 되어 전체 대역폭 중 절반만 활용할 수 있다.
				- 그래서 나온 기술이 MLAG(Multi-Chassis Link Aggregation). 이것을 활용하면 물리적으로 분리된 장비를 논리적으로 하나의 장비처럼 인식하여 Active-Active구조가 된다.
			- VLAN
				- Virtual Local Area Network
				- 물리적으로 구분된 여러개의 LAN구성을 사용환경에 맞게 논리적으로 확장할 수 있도록 해주는 기술
				- 하드디스크의 파티션과 같은 개념이라고 생각하면 이해가 쉽다.
				- Subnet은 네트워크를 쪼개서 논리적인 브로드캐스트 도메인을 만들기 위한 설계에 해당하는 작업이고
				- 설계에 따라 실제 물리적인 스위치 혹은 포트를 서브넷에 매핑되도록 구성을 한 것이 VLAN
		- L3 : 스위치와 라우터
			- 인터넷의 핵심인 L3 스위치
			- 서로다른 VLAN에 존재하는 사람끼리 통신을 할때는 L3 스위치를 통해 라우팅해야지만 서로 연결이 가능하다.
			- 일반적으로 데이터센터에서는 L3스위치는 서버와 직접연결하지 않고 L2 스위치 혹은 다른 L3 스위치와 연결해서 사용한다.
			- 왜냐하면 L3스위치는 L2스위치보다 고가의 장비라서 수많은 서버를 L3스위치에 직접 연결하면 많은 비용이 들기 때문
			- L3스위치의 메인 역할이 라우팅인데 라우터와는 어떻게 다른가?
				- 라우터는 훨씬 다양한 통신 모듈을 제공하기 때문에 비싸고 L3 스위치는 싸다.
		- L4 : 스위치
			- TCP의 영역.
			- 서버운영자들은 세션이라는 용어를 주고 쓰고 개발자들은 소켓이란 용어를 쓴다. 세션은 논리적 경로, 소켓은 물리적경로
			- 시스템의 서비스 상태를 모니터링하고 지능적으로 로드밸런싱을 할 수 있는 장비가 있으면 좋겠다는 생각이 L4 스위치의 등장배경
		- L7 : 스위치
			- Url, Cookie, Contents 와 같은 어플리케이션 정보를 바탕으로 로드밸런싱, 웹가속, SSL가속 기능을 제공하는 장비
			- L4/7 기능을 합쳐서 ADC(Application Delivery Controller) 스위치라고도 부른다.
	- WAF = Web Application Firewall
	- 일반적인 가정에서 사용하는 공유기는 어떤 장비에 해당하나요?
		- 기본적으로 내부 장비 간 통신을 가능케 해주는 L2기능
		- 외부 공인 IP를 내부 사설 IP로 변환해주는 NAT/PAT 기능
		- TCP/IP 통신도 해주니 L3, L4 기능
		- DNS, DHCP 서비스도 제공하니 L7 기능도 일부 지원
		- 공유기의 DNS는 엄밀히 말하면 DDNS(Dynamic DNS)로, 공유기 제조사가 DNS서비스를 제공하고 개별 공유기는 해당 DNS에 자신의 정보를 등록하게 된다.

- 케이블과 공사
	- 회색 랜선 겉 피복에 보면 UTP라고 적혀있다. Unshielded Twisted Pair. 비차폐연선. 용어만 보면 겉에 피복이 없어야 할 것 같은데 실제로는 회색 겉 피복이 있다.
	- STP (Shielded Twisted Pair. 차폐연선). 심선이라고 해서 구리로 되어있는 선을 고무 재질의 속피복으로 감싼 형태. 속 피복으로 감싼 심선 2개씩을 페어로 꼬아서 8가닥을 하나로 묶어 겉 피복을 감싸게 된다. 신호간섭이 많은 공장이나 야외, 통신속도가 굉장히 빨라야 하는 경우에 사용
	- UTP겉 피복에 보면 영문으로 제조사, 제조년월, 유통기한 등이 적혀 있고 카테고리도 적혀있다. 대부분 가정이나 회사에서 많이 사용하는 것이 카테고리 5E(CAT.5E)이다.  랜을 구성한다고 하면 카테고리 5E 케이블을 사용한다. PC방같은 패킷 손실률이 최소화 되어야 하는 사업장에서는 카테고리 5E 케이블 중에서도 FTP라는 케이블을 사용하기도 한다.
	- 몇년 전까지만 해도 데이터센터에서는 카테고리6으로 대부분의 네트워크를 구성했다. 카테고리6은 기가바이트속도의 이더넷 네트워크를 100미터까지 연결하는 것을 보장한다. 최근에 구축되는 데이터 센터는 10기가바이트 네트워크를 구성하기 위해 카테고리6A케이블을 사용
	- UTF, FTP, STP 케이블은 RJ45라는 공통규격의 커넥터를 이용하는데 광케이블은 커넥터 종류가 다양하다.
	- 가장 많이 사용하는 커넥터 타입은 LC타입
	- SC타입은 Serial interface for Connecting Type. 요즘은 거의 사용하지 않는다. 크기는 LC타입 커넥터의 2배
	- 데이터센터에서 일상적으로 하는 공사는 전원공사, 케이블공사, 공조기공사, 발전기 공사등이 있는데 케이블공사는 시스템 담당자들이 진행하는 경우가 많다. 케이블의 용도를 쉽게 구분할 수 있도록 용도별로 색깔을 다르게 해서 특별 주문을 하는 경우가 있다.


- 가상화
	- 가상화 기술은 그 서버의 관리자가 아닌 이상 가상화 서버인지 물리 서버인지 차이를 느낄 수 없게 만드는 것
	- 가상화의 정의는 물리장치의 리소스를 분할하거나 통합해서 추상화된 논리적인 리소스로 가상화 장치를 만들고, 사용자는 가상화 장치를 물리적인 장치처럼 사용하는 것
	- 고시원은 건물 내에 수많은 가벽을 세워서 작은 방을 만들어내고 많은 사람을 수용하는데 나누기전의 방을 물리 메모리, 나눈 작은 방을 가상화 메모리라고 생각하면 이해하기 쉽다.
	- 가상화 기술에 대한 진입장벽이 매우 낮아졌는데 가상화는 아무래도 리소스 관리의 영역이다 보니 운영체제 기술이 가장 중요하다. 십수년 동안 리눅스의 발전과 함께 IT 인프라 모든 영역에 대한 기반 플랫폼으로 리눅스가 도입되었다. 그래서 리눅스의 가상화 기술을 활용할 수 있고 대중화가 가능하게 되었다.