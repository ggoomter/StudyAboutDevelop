강의 : 스트캠퍼스 한번에 끝내는 java/spring 웹개발 마스터 초격차패키지
Ch04. 권한 프로그래밍 실습
강의자료 : 스프링시큐리티 - part3
강의수준 : 스프링부트로 JPA쓰는걸 온전히 알아야함
!!!!스프링 시큐리티에서는 username이 사용자의 이름이 아닌 사용자의 ID를 나타냄에 항상 유의
!!!! SecurityContext에 Authentication객체안에 principal, credential이 들어간다.
!!!! 스프링시큐리티에서 사용자의 정보로 username(db의 pk)만 이용한다. 때문에 이메일이나 이름 등 다른정보를 쓰려면 UserDetailsService를 상속받은 서비스를 구현해서 loadUserByUsername()메서드를 오버라이드 해야한다. 이 메소드는 UserDetails의 반환타입을 요구한다.
!!!! principal은 UserDetailsService에서 반환된 객체
구현클래스의 최상위 인터페이스가 바로 Principal
다만 컨트롤러에서 이 타입으로 받으면 사용할만한 메서드가 getName() 정도밖에 없다.
현재 사용자 정보를 의미한다.
1.  gradle 설정(jpa, 테스트런타임h2)
2.  도메인생성(School, )
   @Data, @Entity, @Table(name="sp_school")





----
학습 : https://to-dy.tistory.com/92
       https://doing7.tistory.com/16
- 로그인실패시 처리 : AuthenticationFailureHandler 인터페이스 구현
onAuthenticationFailure() 메소드 오버라이드
파라미터는 3개.  
HttpServletRequest 객체: 웹에서 넘어온	Request 값을 가지고 있는 객체
HttpServletResponse 객체: 출력을 정의할 수 있는 객체
AuthenticationException 객체: 로그인 실패 정보를 가지고 있는 객체

- 로그인 성공시 처리 :  AuthenticationSuccessHandler 인터페이스 구현
//에러메세지를 세션에 저장하는것은 스프링시큐리티에서 자동으로 하는것.
//아이디가 틀렸습니다, 비밀번호가 틀렸습니다. 같이 구체적인 메세지를 보여주면 ux는 좋아지지만 보안성이 낮아진다.
