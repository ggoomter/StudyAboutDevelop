# 스케쥴
유의해야할점 : 무수히 많은 테스트로 안정성.  비용, ux적 측면에서 크리티컬,    was여러개일경우 중복발송
구시대방식 : 자바프로그램에서 crontab을 통한 자바 호출
중세시대방식 : 스프링 스케쥴러.  사이드 : 스프링 가이드의 스케쥴링 Tasks
@Scheduled는 Spring 3.1 이상부터 지원.    우리는 4.1.0.   리눅스의 crontab과 같다.  스프링의 스케쥴링이 지원하는 어노테이션
    servlet-context.xml의 xmlns에 task등록을 한 후 <task:annotation-driven/> 을 적어주면 된다.
    여기서 중요한건 @Component(@Service 등) 즉, 스프링 빈에 등록된 클래스여야 한다. 
    이렇게 두 개의 어노테이션을 적기만 하면 설정은 끝이고 다음 규칙을 지키며 스케줄러 메소드를 만들자.
      Method는 void 타입으로
      Method는 매개변수 사용 불가

### Quartz ### 쿼츠
  > Terracotta 라는 회사에 의해 개발된 Job Scheduling 오픈소스 POZO 라이브러리.   배치스케줄링이 아님.
  - 쿼츠 어플리케이션을 위한 런타임환경을 관리하는 책임을 지니고 **스케쥴러, 잡, 트리거**로 구성되어 있다.
  - 쿼츠 구현시 중요한것은 "쿼츠설정.xml"과   쿼츠의 동작시 기능을 담당할 "잡.class"
    즉 수행할 작업을 정의하는 Job과   실행스케쥴을 정의하는 Trigger를 분리함으로써 유연성을 제공한다.
  장점 : db기반으로 스케줄러간의 클러스터링 기능 제공
  단점 : 어드민ui제공안함, 스케줄링 실행에 대한 히스토리 보관안함, Fixed Delay 안됨
  결론 : Scheduler보다 Quartz가 설정이 복잡한 반면 클러스터링과 같은 더 많은 기능과 세부적인 컨트롤 가능

쿼츠는 3가지의 컴포넌트를 제공한다.
1. 스케쥴러(Scheduler)
  스케쥴러 팩토리를 통해 가져올 수 있으며 잡디테일 및 트리거의 저장소, 실행
2. 잡(Job)
  사용자가 수행할 작업을 정의하는 인터페이스.  트리거 객체를 이용하여 스케쥴할 수 있다.
  심각한 오류가 발생시 JobExecutionException발생.   단일메소드 execute
3. 트리거(Trigger)
   트리거가 작동되어 쿼츠에게 잡을 실행하도록 지시하면, 잡의 개별 실행을 정의하는 JobDetail 객체가 생성된다.
   JobDetail = 스케줄러에서 수행할 잡에 대한 상세정보를 정의하는 개체

- 과정수료처리체크(checkSubjStold) - 학습자 수료처리(studentCompletionCheck) 는 그냥 스케쥴러와 크론
  고대표님이 하시는 push쪽도 그냥 스케쥴러와 크론
- 알람스케쥴러 실행(runAlarmScheduler)은 쿼츠
(**중요**)<쿼츠로 인스턴스 생성>
정의는 있는데 호출부가 없음.   호출은 @Scheduled에 의해서 지정된 시간에 실행
1. ## 잡 디테일 초기화
  JobBuilder.newJob()         scheduleJob인덱스, scheduleGroup인덱스 이름으로 빌드
   잡 디테일안에는 JobDataMap속성이 있는데   거기에 키-밸류 형태로 잡이 실행될때 사용할 값을 저장한다.
2. ## 트리거 초기화
  TriggerBuilder.newTrigger()
  cronStr을 쓰는데 
      테스트모드일때는 sendTime에서 잘라서 시, 분 세팅
2. ## 스케쥴러 세팅
  sch.scheduleJob(jobdetail, crontrigger);
  
### Scheduler는  
  Scheduler는 의존성 추가도 필요없었는데 스프링 4.0부터는 추가해줘야한단다.
  설정파일에 xmlns:task 추가해줘야한다.


### cron
스프링에서는 crontab을 내장
cron은 crontab을 실행한다.
crontab : 설정.   (스케줄시간, 실행할파일의 경로 관리)
cron : 실행


Spring Scheduled는 7개.    (6개 + 인덱스)
Linux Cron은 6개.   (5개 + 인덱스)  맨앞이 초가 아니라 분

쿼츠 크론 표현식에서는 7개의 필드 사용.
초 분 시 일 월 주 년

* : 모든 값(매시, 매일, 매주처럼 사용한다.)
? : 특정 값이 아닌 어떤 값이든 상관 없음
- : 범위를 지정할 때
, : 여러 값을 지정할 때
/ : 증분값, 즉 초기값과 증가치를 설정할 때
L : 지정할 수 있는 범위의 마지막 값 표시
W : 가장 가까운 평일(weekday)을 설정할 때
# : N번 째 특정 요일을 설정할 때


# SMTP
Simple Mail Transfer Protocol
메일을 보낼때 사용하는 표준 프로토콜
메일을 보내기 위해서는 메일서버가 필요하다.
자체 메일서버가 없으면 구글이나 네이버 등을 빌려하고, 그럼 해당업체에 회원가입을 해야한다.


# POP3
Post Office Protocol3
메일을 내 pc로 가져올때 사용하는 프로토콜
